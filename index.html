<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ProTeller | Cash & Ledger System</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
    :root {
        --bg-dark: #0f172a;
        --panel-bg: rgba(30, 41, 59, 0.7);
        --accent-blue: #38bdf8;
        --accent-green: #4ade80;
        --accent-red: #f87171;
        --accent-gold: #fbbf24;
        --text-main: #f1f5f9;
        --text-muted: #94a3b8;
        --glass-border: 1px solid rgba(255, 255, 255, 0.1);
    }

    * { box-sizing: border-box; font-family: 'Inter', sans-serif; margin: 0; padding: 0; }

    body {
        background-color: var(--bg-dark);
        background-image: 
            radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
            radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
            radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
        color: var(--text-main);
        min-height: 100vh;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
    }

    /* Main Grid Layout */
    .dashboard {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        width: 100%;
        max-width: 1400px;
        min-height: 90vh;
    }

    /* Glass Panels */
    .panel {
        background: var(--panel-bg);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: var(--glass-border);
        border-radius: 20px;
        padding: 25px;
        display: flex;
        flex-direction: column;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        height: fit-content;
        min-height: 650px;
    }

    /* Header Styles */
    header {
        grid-column: span 2;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        border-bottom: var(--glass-border);
        padding-bottom: 15px;
    }
    h1 { font-size: 24px; font-weight: 800; letter-spacing: -0.5px; margin: 0; }
    h1 span { color: var(--accent-blue); }
    h2 { 
        font-size: 16px; 
        text-transform: uppercase; 
        letter-spacing: 2px; 
        color: var(--text-muted); 
        margin-top: 0; 
        margin-bottom: 20px;
        border-bottom: 2px solid var(--accent-blue); 
        display: inline-block; 
        padding-bottom: 5px;
    }

    /* Inputs & Typography */
    .hero-number { 
        font-size: 32px; 
        font-weight: 800; 
        margin: 10px 0; 
        letter-spacing: -1px; 
        min-height: 45px;
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }
    
    input {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid #334155;
        color: white;
        padding: 10px;
        border-radius: 8px;
        text-align: right;
        font-weight: 600;
        width: 100%;
        transition: all 0.3s ease;
        font-size: 16px;
    }
    input:focus { 
        outline: none; 
        border-color: var(--accent-blue); 
        box-shadow: 0 0 15px rgba(56, 189, 248, 0.2); 
    }
    input::placeholder {
        color: rgba(255, 255, 255, 0.3);
    }
    
    /* LEFT PANEL: Table */
    .cash-table { 
        width: 100%; 
        border-collapse: collapse;
        margin-bottom: 20px;
        flex-grow: 1;
    }
    .cash-table thead th {
        padding: 12px 8px;
        text-align: left;
        font-weight: 600;
        background: rgba(0, 0, 0, 0.2);
        border-bottom: var(--glass-border);
    }
    .cash-table tbody tr {
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    .cash-table td { 
        padding: 12px 8px; 
        background: rgba(255,255,255,0.03); 
        border: none; 
    }
    .cash-table tr td:first-child { 
        font-weight: bold; 
        color: var(--accent-gold); 
        width: 30%;
    }
    .cash-table tr td:nth-child(2) { 
        width: 40%;
    }
    .cash-table tr td:last-child { 
        text-align: right;
        width: 30%;
    }
    .cash-table input { 
        width: 100%; 
        max-width: 120px; 
        text-align: center; 
        background: rgba(255,255,255,0.08); 
        font-size: 16px;
        padding: 8px;
    }

    /* RIGHT PANEL: Cards */
    .ledger-grid { 
        display: grid; 
        grid-template-columns: 1fr 1fr; 
        gap: 15px; 
        margin-bottom: 20px; 
    }
    .card { 
        background: rgba(255,255,255,0.05); 
        padding: 15px; 
        border-radius: 12px; 
        border: var(--glass-border); 
    }
    .card label { 
        font-size: 12px; 
        color: var(--text-muted); 
        display: block; 
        margin-bottom: 8px; 
        text-transform: uppercase; 
    }
    
    /* Status Colors */
    .status-match { 
        color: var(--accent-green); 
        text-shadow: 0 0 10px rgba(74, 222, 128, 0.3); 
    }
    .status-error { 
        color: var(--accent-red); 
        text-shadow: 0 0 10px rgba(248, 113, 113, 0.3); 
    }
    .status-waiting {
        color: var(--text-muted);
    }

    /* Buttons */
    .actions { 
        grid-column: span 2; 
        display: flex; 
        justify-content: flex-end; 
        gap: 15px; 
        margin-top: 20px; 
        padding-top: 20px;
        border-top: var(--glass-border);
    }
    button {
        background: var(--accent-blue);
        color: #0f172a;
        border: none;
        padding: 14px 28px;
        border-radius: 8px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    button:hover { 
        transform: translateY(-2px); 
        filter: brightness(1.2);
        box-shadow: 0 5px 15px rgba(56, 189, 248, 0.3);
    }
    button.secondary { 
        background: rgba(255, 255, 255, 0.1); 
        border: 1px solid var(--text-muted); 
        color: var(--text-muted); 
    }
    button.secondary:hover {
        background: rgba(255, 255, 255, 0.15);
        border-color: var(--accent-blue);
        color: var(--accent-blue);
    }

    /* Footer */
    .copyright {
        grid-column: span 2;
        text-align: center;
        font-size: 12px;
        color: var(--text-muted);
        margin-top: 10px;
        opacity: 0.6;
        padding-top: 10px;
        border-top: var(--glass-border);
    }

    /* Remarks Textarea */
    textarea {
        width: 100%;
        background: rgba(0, 0, 0, 0.2);
        border: var(--glass-border);
        color: var(--text-muted);
        border-radius: 8px;
        padding: 12px;
        font-size: 13px;
        min-height: 80px;
        resize: vertical;
        font-family: 'Inter', monospace;
        margin-top: 5px;
    }
    textarea:read-only {
        cursor: default;
    }

    /* Amount displays */
    .amount-display {
        font-size: 24px;
        font-weight: 700;
        text-align: right;
        padding: 5px 0;
    }

    /* Short form badge */
    .short-form {
        font-size: 14px;
        font-weight: 600;
        color: var(--accent-blue);
        margin-left: 5px;
        opacity: 0.8;
        vertical-align: super;
    }

    /* Print Styles */
    @media print {
        body { 
            background: white; 
            color: black; 
            padding: 0; 
            display: block; 
        }
        .dashboard { 
            display: block; 
            max-width: 100%;
            min-height: auto;
        }
        .panel { 
            background: white; 
            border: 1px solid #ccc; 
            box-shadow: none; 
            margin-bottom: 20px; 
            color: black; 
            min-height: auto;
        }
        input { 
            border: none; 
            border-bottom: 1px solid #000; 
            color: black; 
            background: transparent; 
            text-align: right; 
        }
        h1 span { color: black; }
        button, .actions { display: none !important; }
        .status-match { color: black; font-weight: bold; }
        .status-error { color: black; font-weight: bold; text-decoration: underline; }
        header { border-bottom: 2px solid #000; }
        .cash-table td { 
            background: transparent; 
            border-bottom: 1px solid #eee; 
        }
        textarea {
            background: transparent;
            border: 1px solid #ccc;
            color: black;
        }
        .short-form {
            color: black;
            font-size: 12px;
        }
    }

    /* Mobile adjustments */
    @media (max-width: 900px) {
        .dashboard { 
            grid-template-columns: 1fr; 
            gap: 15px;
        }
        header, .actions, .copyright { 
            grid-column: 1; 
        }
        .panel {
            min-height: auto;
        }
        .hero-number {
            font-size: 28px;
        }
        .ledger-grid {
            grid-template-columns: 1fr;
        }
        .short-form {
            font-size: 12px;
        }
    }

    @media (max-width: 480px) {
        body {
            padding: 10px;
        }
        .panel {
            padding: 15px;
        }
        button {
            padding: 12px 20px;
            font-size: 13px;
        }
        .hero-number {
            font-size: 24px;
        }
        .short-form {
            font-size: 11px;
        }
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
    }
    ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
    }
</style>
</head>
<body>

<div class="dashboard">
    <header>
        <div>
            <h1>ProTeller <span>v2.0</span></h1>
            <p style="color:var(--text-muted); font-size:12px; margin:0;">Cash Management System</p>
        </div>
        <div style="text-align: right">
            <div id="clock" style="font-family: monospace; font-size: 14px; color: var(--accent-blue);"></div>
            <div style="font-size: 10px; color: var(--text-muted); display: flex; align-items: center; gap: 10px; margin-top: 5px;">
                <span>PKR CURRENCY</span>
                <span style="font-size: 9px; opacity: 0.7;">K=Thousand, M=Million, B=Billion, T=Trillion</span>
            </div>
        </div>
    </header>

    <div class="panel">
        <h2><span style="margin-right:10px">üîí</span>Physical Vault</h2>
        <p style="font-size:13px; color:var(--text-muted); margin-bottom:20px;">Enter the Detail of physical notes below.</p>
        
        <table class="cash-table">
            <thead>
                <tr>
                    <th style="text-align:left">Denomination</th>
                    <th style="text-align:center">Quantity</th>
                    <th style="text-align:right">Total (PKR)</th>
                </tr>
            </thead>
            <tbody id="cashTable"></tbody>
        </table>
        
        <div style="margin-top: auto; padding-top: 20px; border-top: var(--glass-border);">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="color:var(--text-muted); font-size:14px; font-weight:600;">Total Physical Cash</span>
                <div id="physicalTotal" class="hero-number" style="color:var(--accent-green);">0</div>
            </div>
            <div id="physicalTotalShort" style="text-align:right; font-size:12px; color:var(--text-muted); margin-top:5px;"></div>
        </div>
    </div>

    <div class="panel">
        <h2><span style="margin-right:10px">üìä</span>Digital Ledger</h2>
        
        <div style="margin-bottom: 30px;">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <strong style="color:var(--accent-blue)">1. Deposit Verification</strong>
            </div>
            <div class="card" style="display:flex; justify-content:space-between; align-items:center; gap:15px;">
                <div style="flex: 1;">
                    <label>Deposit Slip Amount</label>
                    <input type="number" id="slipAmount" placeholder="Enter amount" min="0" step="any">
                </div>
                <div style="text-align:right; min-width: 120px;">
                    <label>Status</label>
                    <div id="slipStatus" style="font-weight:bold; font-size:18px; min-height: 28px;" class="status-waiting">-</div>
                    <div id="slipDiffVal" style="font-size:12px; color:var(--text-muted); min-height: 18px;">-</div>
                    <div id="slipDiffShort" style="font-size:10px; color:var(--text-muted);"></div>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <strong style="color:var(--accent-gold); display:block; margin-bottom:15px;">2. Day Book Balancing</strong>
            <div class="ledger-grid">
                <div class="card">
                    <label>Opening Balance</label>
                    <input type="number" id="opening" placeholder="0" min="0" step="any">
                    <div id="openingShort" style="font-size:11px; color:var(--text-muted); text-align:right; margin-top:5px;"></div>
                </div>
                <div class="card">
                    <label>Cash Paid Out</label>
                    <input type="number" id="cashPaid" placeholder="0" min="0" step="any">
                    <div id="cashPaidShort" style="font-size:11px; color:var(--text-muted); text-align:right; margin-top:5px;"></div>
                </div>
            </div>
            
            <div class="card" style="background: rgba(255,255,255,0.08); margin-top: 15px;">
                <div style="display:flex; justify-content:space-between; margin-bottom: 15px; align-items: center;">
                    <label>System Expected Closing</label>
                    <div style="text-align:right;">
                        <span id="systemClosing" style="font-weight:bold; font-size: 18px;">0</span>
                        <div id="systemClosingShort" style="font-size:11px; color:var(--text-muted);"></div>
                    </div>
                </div>
                <div style="display:flex; justify-content:space-between; padding-top:15px; border-top:1px solid rgba(255,255,255,0.1); align-items: center;">
                    <label>Actual Physical Cash</label>
                    <div style="text-align:right;">
                        <span id="ledgerPhysical" style="font-weight:bold; font-size: 18px;">0</span>
                        <div id="ledgerPhysicalShort" style="font-size:11px; color:var(--text-muted);"></div>
                    </div>
                </div>
            </div>
            
            <div style="text-align:center; margin-top: 25px;">
                <label style="display:block; margin-bottom:10px;">Final Ledger Discrepancy</label>
                <div id="ledgerDiff" class="hero-number status-waiting">0</div>
                <div id="ledgerDiffShort" style="font-size:12px; color:var(--text-muted); margin-top:5px;"></div>
            </div>
        </div>

        <div style="margin-top: auto;">
             <label>Auto-Generated Remarks</label>
             <textarea id="remarks" readonly>Enter values to generate remarks...</textarea>
        </div>
    </div>

    <div class="actions">
        <button class="secondary" onclick="resetSheet()">üîÑ Reset All</button>
        <button onclick="window.print()">üñ®Ô∏è Print Report</button>
    </div>

    <div class="copyright">
        &copy; 2026 Crafted by <strong>Salman Khan</strong>. All Rights Reserved.
    </div>
</div>

<script>
const denoms = [5000, 1000, 500, 100, 50, 20, 10, 5, 2, 1];
const tbody = document.getElementById("cashTable");

// Function to format numbers in short form
function formatNumberShort(num) {
    if (num === 0) return { formatted: "0", short: "" };
    
    const absNum = Math.abs(num);
    let formatted, short;
    
    if (absNum >= 1e12) {
        formatted = (num / 1e12).toFixed(2).replace(/\.00$/, '');
        short = "T";
    } else if (absNum >= 1e9) {
        formatted = (num / 1e9).toFixed(2).replace(/\.00$/, '');
        short = "B";
    } else if (absNum >= 1e6) {
        formatted = (num / 1e6).toFixed(2).replace(/\.00$/, '');
        short = "M";
    } else if (absNum >= 1e3) {
        formatted = (num / 1e3).toFixed(2).replace(/\.00$/, '');
        short = "K";
    } else {
        formatted = num.toLocaleString();
        short = "";
    }
    
    return { formatted, short };
}

// Function to display both formats
function displayWithShortFormat(elementId, value, shortElementId = null) {
    const formatted = formatNumberShort(value);
    const element = document.getElementById(elementId);
    
    if (element) {
        element.textContent = formatted.formatted;
        if (formatted.short) {
            element.innerHTML += `<span class="short-form">${formatted.short}</span>`;
        }
    }
    
    // Update separate short display if provided
    if (shortElementId) {
        const shortElement = document.getElementById(shortElementId);
        if (shortElement) {
            shortElement.textContent = value.toLocaleString();
        }
    }
}

// Initialize Table
denoms.forEach(d => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
        <td>${d.toLocaleString()}</td>
        <td><input type="number" min="0" placeholder="0" class="qty-input" value="0"></td>
        <td class="row-total">0</td>
    `;
    tbody.appendChild(tr);
});

// Event Listeners
document.addEventListener("input", function(e) {
    if (e.target.classList.contains("qty-input") || 
        ["slipAmount", "opening", "cashPaid"].includes(e.target.id)) {
        recalc();
    }
});

function recalc() {
    let physicalTotalVal = 0;
    
    // Calculate Physical Cash
    document.querySelectorAll("#cashTable tr").forEach((row, index) => {
        const qty = parseFloat(row.querySelector(".qty-input").value) || 0;
        const total = qty * denoms[index];
        physicalTotalVal += total;
        
        const totalCell = row.querySelector(".row-total");
        totalCell.textContent = total.toLocaleString();
        totalCell.style.color = total > 0 ? "white" : "var(--text-muted)";
        totalCell.style.fontWeight = total > 0 ? "600" : "400";
        
        // Highlight active rows
        row.style.background = qty > 0 ? "rgba(56, 189, 248, 0.08)" : "transparent";
    });

    // Update Totals with short format
    displayWithShortFormat("physicalTotal", physicalTotalVal, "physicalTotalShort");
    displayWithShortFormat("ledgerPhysical", physicalTotalVal, "ledgerPhysicalShort");

    // Slip Verification
    const slipVal = parseFloat(document.getElementById("slipAmount").value) || 0;
    const slipDiff = physicalTotalVal - slipVal;
    const slipStatus = document.getElementById("slipStatus");
    const slipDiffVal = document.getElementById("slipDiffVal");
    const slipDiffShort = document.getElementById("slipDiffShort");

    if(slipVal === 0 && physicalTotalVal === 0) {
        slipStatus.textContent = "-";
        slipStatus.className = "status-waiting";
        slipDiffVal.textContent = "Enter amounts";
        slipDiffShort.textContent = "";
    } else if (slipDiff === 0) {
        slipStatus.textContent = "MATCHED ‚úì";
        slipStatus.className = "status-match";
        slipDiffVal.textContent = "Perfect Match";
        slipDiffShort.textContent = "";
    } else {
        slipStatus.textContent = slipDiff > 0 ? "EXCESS +" : "SHORT -";
        slipStatus.className = "status-error";
        const sign = slipDiff > 0 ? '+' : '';
        
        // Show both short and full format
        const formattedDiff = formatNumberShort(Math.abs(slipDiff));
        slipDiffVal.textContent = `${sign}${formattedDiff.formatted}${formattedDiff.short ? formattedDiff.short : ''}`;
        slipDiffShort.textContent = `${sign}${Math.abs(slipDiff).toLocaleString()} PKR`;
    }

    // Ledger Calculation
    const opening = parseFloat(document.getElementById("opening").value) || 0;
    const paid = parseFloat(document.getElementById("cashPaid").value) || 0;
    
    // Display opening and paid with short format
    displayWithShortFormat("openingShort", opening);
    displayWithShortFormat("cashPaidShort", paid);
    
    // System Expected = Opening + Slip - Paid
    const expectedSystem = opening + slipVal - paid;
    displayWithShortFormat("systemClosing", expectedSystem, "systemClosingShort");

    // Ledger Difference = Physical - Expected System
    const ledgerDiff = physicalTotalVal - expectedSystem;
    const ledgerDisplay = document.getElementById("ledgerDiff");
    const ledgerDiffShort = document.getElementById("ledgerDiffShort");
    
    if(slipVal === 0 && physicalTotalVal === 0 && opening === 0 && paid === 0) {
        ledgerDisplay.textContent = "0";
        ledgerDisplay.className = "hero-number status-waiting";
        ledgerDiffShort.textContent = "";
    } else if(Math.abs(ledgerDiff) < 0.01) { // Account for floating point
        ledgerDisplay.textContent = "BALANCED ‚úì";
        ledgerDisplay.className = "hero-number status-match";
        ledgerDiffShort.textContent = "0 PKR";
    } else {
        const formattedDiff = formatNumberShort(ledgerDiff);
        const sign = ledgerDiff > 0 ? '+' : '';
        ledgerDisplay.innerHTML = `${sign}${formattedDiff.formatted}${formattedDiff.short ? `<span class="short-form">${formattedDiff.short}</span>` : ''}`;
        ledgerDisplay.className = "hero-number status-error";
        ledgerDiffShort.textContent = `${sign}${Math.abs(ledgerDiff).toLocaleString()} PKR`;
    }

    // Generate Remarks
    updateRemarks(slipDiff, ledgerDiff);
}

function updateRemarks(slipDiff, ledgerDiff) {
    const remarks = document.getElementById("remarks");
    let notes = [];
    
    if(Math.abs(slipDiff) > 0.01) {
        const formattedSlip = formatNumberShort(Math.abs(slipDiff));
        notes.push(`Deposit: ${slipDiff > 0 ? 'Excess' : 'Short'} ${formattedSlip.formatted}${formattedSlip.short} PKR`);
    }
    
    if(Math.abs(ledgerDiff) > 0.01) {
        const formattedLedger = formatNumberShort(Math.abs(ledgerDiff));
        notes.push(`Ledger: ${ledgerDiff > 0 ? 'Surplus' : 'Deficit'} ${formattedLedger.formatted}${formattedLedger.short} PKR`);
    }
    
    if(notes.length === 0) {
        notes.push("All accounts verified. No discrepancies found.");
    }
    
    remarks.value = notes.join(" | ");
}

function resetSheet() {
    if(confirm("Are you sure you want to reset all values?")) {
        document.querySelectorAll("input").forEach(input => {
            if(input.classList.contains("qty-input") || 
               ["slipAmount", "opening", "cashPaid"].includes(input.id)) {
                input.value = "";
                if(input.classList.contains("qty-input")) input.value = "0";
            }
        });
        recalc();
    }
}

// Initialize clock
function updateClock() {
    const now = new Date();
    document.getElementById("clock").textContent = 
        now.toLocaleDateString() + " " + now.toLocaleTimeString();
}
setInterval(updateClock, 1000);
updateClock();

// Initialize calculation
recalc();
</script>

</body>
</html>